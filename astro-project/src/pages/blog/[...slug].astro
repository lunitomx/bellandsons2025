---
import { getCollection } from 'astro:content';
import BlogLayout from '../../layouts/BlogLayout.astro';
import { Image } from 'astro:assets';
import SEO from '../../components/SEO.astro';

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
const articleUrl = `https://bellandsons.com.mx/blog/${entry.slug}`;
---

<BlogLayout title={entry.data.title} description={entry.data.description} image={entry.data.image} article={true}>
    <SEO 
        slot="seo"
        type="article" 
        article={{
            title: entry.data.title,
            description: entry.data.description,
            image: entry.data.image,
            pubDate: entry.data.pubDate,
            author: entry.data.author,
            url: articleUrl
        }} 
    />
    <article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <!-- Hero Image -->
        <div class="mb-8">
            <Image src={entry.data.image} 
                 alt={entry.data.title} 
                 class="w-full h-64 md:h-96 object-cover rounded-xl shadow-lg"
                 loading="eager" />
        </div>

        <!-- Article Header -->
        <header class="text-center mb-12">
            <h1 class="font-serif text-4xl md:text-5xl font-bold text-gray-900 mb-4">
                {entry.data.title}
            </h1>
            <div class="flex items-center justify-center space-x-4 text-gray-600 mb-6">
                <div class="flex items-center">
                    <i class="fas fa-user-circle mr-2"></i>
                    <span>{entry.data.author}</span>
                </div>
                <div class="flex items-center">
                    <i class="fas fa-calendar mr-2"></i>
                    <span>{entry.data.pubDate.toLocaleDateString('es-MX', { year: 'numeric', month: 'long', day: 'numeric' })}</span>
                </div>
            </div>
        </header>

        <!-- Article Content -->
        <div class="prose prose-lg max-w-none prose-headings:font-serif prose-headings:text-gray-900 prose-a:text-primary prose-a:no-underline hover:prose-a:underline prose-img:rounded-xl">
            <Content />
        </div>
    </article>
</BlogLayout>
